{
  "$schema": "../cdk.schema.json",
  "Resources": {
    "MyTopic": {
      "Type": "aws-cdk-lib.aws_sns.Topic"
    },
    "Table": {
      "Type": "aws-cdk-lib.aws_dynamodb.Table",
      "Properties": {
        "partitionKey": {
          "name": "ID",
          "type": "STRING"
        },
        "stream": "NEW_AND_OLD_IMAGES"
      }
    },
    "HelloWorldFunction": {
      "Type": "aws-cdk-lib.aws_lambda.Function",
      "Properties": {
        "handler": "app.hello_handler",
        "runtime": "PYTHON_3_6",
        "code": {
          "fromAsset": { "path": "." }
        },
        "environment": {
          "Param": "f"
        },
        "events": [
          { "aws-cdk-lib.aws_lambda_event_sources.DynamoEventSource": { "table": { "Ref": "Table" }, "startingPosition": "TRIM_HORIZON" } },
          { "aws-cdk-lib.aws_lambda_event_sources.ApiEventSource": { "method": "GET", "path": "/hello" } },
          { "aws-cdk-lib.aws_lambda_event_sources.ApiEventSource": { "method": "POST", "path": "/hello" } },
          { "aws-cdk-lib.aws_lambda_event_sources.SnsEventSource": { "topic": { "Ref": "MyTopic" } } }
        ]
      }
    }
  }
}